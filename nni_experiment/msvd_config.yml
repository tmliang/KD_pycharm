search_space:
  n_prompt:
    _type: randint
    _value: [ 0, 10 ]
  beta:
    _type: uniform
    _value: [ 0, 1 ]
  epochs:
    _type: choice
    _value: [ 3, 5, 10, 15 ]
  lr:
    _type: uniform
    _value: [ 0.00001, 0.0001 ]

trial_command: PYTHONPATH=. python nni_experiment/rankingkd.py --dataset msvd --teacher_load=ckpt/msvd/msvd_a.pth --load=ckpt/msvd/msvd_b.pth --batch_size=32 --batch_size_val=256 --no_context --loss1=stlistnet --loss2=r2kd --alpha0=0.05 --alpha1=10 --alpha2=0.1 --neg_sampler=exp
trial_code_directory: ~/KD

trialGpuNumber: 1
trial_concurrency: 4
max_trial_number: 100

tuner:
  name: TPE
  class_args:
    optimize_mode: maximize

training_service:
  platform: local
  useActiveGpu: True
  maxTrialNumberPerGpu: 1